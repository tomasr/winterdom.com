---
layout: post
status: publish
published: true
title: Comments on the WF 4.0 Designer
author:
  display_name: Tomas Restrepo
  login: tomasr
  email: tomas@winterdom.com
  url: http://winterdom.com/
author_login: tomasr
author_email: tomas@winterdom.com
author_url: http://winterdom.com/
wordpress_id: 1253
wordpress_url: http://winterdom.com/2009/05/comments-on-the-wf-40-designer
date: '2009-05-25 15:40:14 +0000'
date_gmt: '2009-05-25 15:40:14 +0000'
categories:
- Workflow
tags: []
comments:
- id: 832
  author: Mark Dunn
  author_email: mark@dunntraining.com
  author_url: http://www.dunntraining.com
  date: '2009-05-26 12:08:27 +0000'
  date_gmt: '2009-05-26 12:08:27 +0000'
  content: Nice post Tomas.  I work quit a bit with WF myself and agree with your
    points.
- id: 833
  author: DotNetShoutout
  author_email: ''
  author_url: http://dotnetshoutout.com/Comments-on-the-WF-40-Designer-Tomas-Restrepo
  date: '2009-05-26 13:47:20 +0000'
  date_gmt: '2009-05-26 13:47:20 +0000'
  content: |-
    <strong>Comments on the WF 4.0 Designer - Tomas Restrepo...</strong>

    Thank you for submitting this cool story - Trackback from DotNetShoutout...
- id: 835
  author: Mick Badran
  author_email: mickb@breezetraining.com.au
  author_url: http://blogs.breezetraining.com.au/mickb
  date: '2009-05-27 07:57:14 +0000'
  date_gmt: '2009-05-27 07:57:14 +0000'
  content: "Thomas - nice view on the WF stuff.\r\nI've worked with WF since the first
    TAP.\r\n\r\nThe problem I find through the generations of WF - MS are trying to
    increase the level of functionality within the environment.\r\n\r\nAs you &amp;
    I both know from the BTS world and the Orch designer surface - it becomes very
    difficult to maintain a clear picture on the tasks at hand and the design process.\r\n(On
    one hand, there *is* a reason why code and code IDE windows have survived today.)\r\n\r\nI'm
    not a big fan of popup dialogue windows here&#47;there and it's difficult to keep
    a clear picture of what is going on. The drill down windows that 'hide' some magic
    are difficult for developers to see.\r\n\r\nI used to be a huge fan that in the
    WF designer we could represent not on the process, but also all the metadata that
    'drives' the workflow also (e.g. escalation manager when on a state etc)\r\n\r\nNow
    - the WF world seems too complex for it's own good, where in the designer it's
    difficult to find&#47;remember where you set that variable X = 5.\r\n\r\nTake
    care"
- id: 839
  author: 'New and Notable 323 : Sam Gentile''s Blog (if (DeveloperTask == Communication
    &amp;&amp; OS == Windows)'
  author_email: ''
  author_url: http://samgentile.com/Web/new-and-notable/new-and-notable-323/
  date: '2009-05-27 15:17:47 +0000'
  date_gmt: '2009-05-27 15:17:47 +0000'
  content: "[...] My good friend Tomas has a great write up on the new WF 4 designer
    - I agree 100% [...]"
---
<p>I&rsquo;ve been testing a few of the new features in Workflow Foundation 4.0 and getting to know the completely revamped Workflow Designer in Visual Studio 2010 beta 1. In a broad sense, I think it&rsquo;s an improvement over the old designer in VS2005&#47;8, but in the end I&rsquo;m still far from happy with it. Here are some comments on what I like and don&rsquo;t like:</p><br />
<h2>What I like</h2>
<ul>
<li>It&rsquo;s hard to argue that the new designer isn&rsquo;t a big improvement in the looks category. It sports a somewhat minimalistic view, making much less use of gradients and other bling that was common in its previous incarnation. </li>
<li>The option to zoom in&#47;out of the current workflow view is great. Not only is it useful, it&rsquo;s very smooth as well. </li>
<li>The mini-map rocks when navigating a large map, and I find it particularly useful when I&rsquo;m working on a zoomed designer window:      <br &#47;><a href="http:&#47;&#47;winterdom.com&#47;wp-content&#47;uploads&#47;2009&#47;05&#47;vs10-wf-minimap.png"><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="vs10_wf_minimap" border="0" alt="vs10_wf_minimap" src="http:&#47;&#47;winterdom.com&#47;wp-content&#47;uploads&#47;2009&#47;05&#47;vs10-wf-minimap-thumb.png" width="240" height="224" &#47;></a> </li>
<li>I like the breadcrumbs navigation list at the top-left of the designer as you dive deeper into nested activities. It could be a bit more visible, though.      <br &#47;><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="vs10_wf_nav" border="0" alt="vs10_wf_nav" src="http:&#47;&#47;winterdom.com&#47;wp-content&#47;uploads&#47;2009&#47;05&#47;vs10-wf-nav.png" width="229" height="61" &#47;> </li>
<li>The variables and arguments windows are useful, and certainly the underlying concept is, in general, far more solid than the activity binding model supported in previous versions of the runtime. </li>
<li>The new Flowchart workflows types, and it&rsquo;s associated designer is, in my humble opinion, a massive improvement over the previous models. It feels a lot more natural to write flows like this and it&rsquo;s a lot easier to organize the workflow visually into something that makes sense. </li>
<li>There&rsquo;s a Save As Image option in the designer popup menu that can be used to save a JPG file with an image of the workflow as it&rsquo;s currently shown in the designer. It&rsquo;s useful, though not thrilled that warnings&#47;errors are rendered into the saved image. </li> </ul>
<p></p><br />
<h2>What I don&rsquo;t like</h2>
<p>Unfortunately, this might very well be a far longer list:</p>
<p>The overall way of writing workflows through the designer remains extremely clunky, and it&rsquo;s a pretty slow and awkward process. Maybe it&rsquo;s just me, but I don&rsquo;t find the overall experience very pleasant. </p>
<p>To start with, doing almost anything requires way too many clicks here and there. You find yourself constantly jumping between the workflow window, the variables window, the properties window and one or more popup tool windows to enter data and edit data.</p>
<p>To make things a bit worse, I find the lack of connections between all these to be somewhat unsettling, because no part of the process is oriented towards doing tasks but just small parts of tasks at a time. Because they are not connected across the entire process, I would find myself jumping back and forth between windows.</p>
<p>For example, let&rsquo;s say I add a new activity and want to bind some data to one of it&rsquo;s properties. When I go to the properties window and fire up the expression window, I realize I needed to move data from somewhere else and would like a workflow variable for that. So now I have to back out of the current spot, go back to the Variables window, add the variable, back to the properties window and into the expression window. Too many steps!</p>
<p><a href="http:&#47;&#47;winterdom.com&#47;wp-content&#47;uploads&#47;2009&#47;05&#47;vs10-wf-inline.png"><img style="border-right-width: 0px; margin: 0px 0px 5px 10px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="vs10_wf_inline" border="0" alt="vs10_wf_inline" align="right" src="http:&#47;&#47;winterdom.com&#47;wp-content&#47;uploads&#47;2009&#47;05&#47;vs10-wf-inline-thumb.png" width="240" height="124" &#47;></a> Another thing I&rsquo;m not a big fan of is having activities provide lots of built-in editing windows right on the designer surface. For example, the <code>InvokeMethod<T></code> activity allows you to enter the expressions for Target Type, Target Object and Method Name right into the designer.</p>
<p>At first glance, this would seem like a good thing; after all, it saves you from a few trips to the properties window. But later, it becomes a bit more cumbersome, as it is data that you&rsquo;re simply not interested in looking at the whole time. Also, most of the time the activity&rsquo;s display surface will be too small to display entire values, so it&rsquo;s not even that useful then.</p><br />
<h3>Tool Windows</h3>
<p>Tool Windows in the current beta are horrible to work with; they have very poor usability. I&rsquo;m referring to windows such as the expression editor, the type selection window and so forth.</p>
<p><a href="http:&#47;&#47;winterdom.com&#47;wp-content&#47;uploads&#47;2009&#47;05&#47;vs10-wf-exprwnd.png"><img style="border-right-width: 0px; margin: 0px 10px 0px 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="vs10_wf_exprwnd" border="0" alt="vs10_wf_exprwnd" align="left" src="http:&#47;&#47;winterdom.com&#47;wp-content&#47;uploads&#47;2009&#47;05&#47;vs10-wf-exprwnd-thumb.png" width="240" height="123" &#47;></a> The first problem I ran into is that almost none of the popup windows are resizable. For most windows, this is really annoying, and what&rsquo;s worse is that this includes the all around common Expression Editor window. Seriously, have we learned nothing from all the complaints around this from the BizTalk Orchestration designer?</p>
<p>For some windows, though, it gets even worse. Some windows, such as those that have grids, are not only not resizable by the user, but they also change size on their own. Drives me nuts! </p>
<p>A good example of this is the window that comes up when you try to edit the <code>Parameters</code> property of the <code>InvokePowerShell</code> activity: Initially, it contains just enough space to display a single row. After adding one row, the window resizes to show the original row and a blank new row, and keeps doing that as you add data to it. If you delete a row, the window becomes smaller again. There&rsquo;s also no built-in scrolling at all, so if you need to add more rows than fit vertically on your screen, well, you&rsquo;re hosed.</p>
<p>Another thing that gives a bad initial impression is that some windows react strangely to input from the user. For example, consider the Expression Editor Window. When it comes up, it has one size. Click on the actual text box to change the expression, and the window jumps around resizing itself twice (to end up with the initial size). Annoying.</p>
<p>To be fair to the Expression Editor window, user input isn&rsquo;t always handled correctly in other places. For example, try to enter an expression for the default value of a new variable in the Variables window and try selecting the &ldquo;All&rdquo; button under the IntelliSense window when it pops up. Yep, it all goes away.</p>
<p>Here&rsquo;s another that doesn&rsquo;t make much sense to me: The Browse for Types window that comes up when selecting the type for a variable lists types by assembly, and inside each one ordered by type name, without consideration for namespaces. Yes, types are not grouped around namespaces at all.</p>
<p>Oh, and while we&rsquo;re at it: All those new tool windows have nice and shiny white backgrounds all over the place. Considering plucking my eyes out as a workaround.</p><br />
<h3>The Flowchart Designer</h3>
<p>Flowcharts are (to me) the single most important feature in WF 4. They are a much nicer model to work with, I think. That said, the designer is not without faults:</p>
<ul>
<li>Connection points are too sensitive, making them hard to target and pinpoint accurately. Sometimes links just end up going where you don&rsquo;t want them to. </li>
<li>Arrows are too small, making it hard to grasp the flow at a glance (particularly when the view is zoomed out). </li>
<li>The automatic routing of arrows is sometimes quirky (though I guess it&rsquo;s OK). </li>
<li>Sometimes selection isn&rsquo;t handled correctly. Many times I&rsquo;ve selected an arrow, seen it clearly rendered as selected, hit the Delete key only to find the entire workflow is deleted. At least Undo seems to work. </li>
<li>I love that you can resize the flowchart designer area. I hate that you have to scroll all the way to the bottom right to do it. </li> </ul><br />
<h2>Variable Scope</h2>
<p>In WF 4.0, Variables are scoped to composite activities. That is, you can define a variable either on the top level workflow, or on a specific activity, like a <code>Sequence</code> or a <code>CancellationScope</code> already in the workflow.</p>
<p>Unfortunately, the way this is exposed at the designer level is incredibly clunky:</p>
<ul>
<li>The scope is not represented visually in the Variables window. Instead all you get is the Scope column in the variables list:      <br &#47;><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="vs10_wf_scope" border="0" alt="vs10_wf_scope" src="http:&#47;&#47;winterdom.com&#47;wp-content&#47;uploads&#47;2009&#47;05&#47;vs10-wf-scope.png" width="214" height="124" &#47;>       <br &#47;>Even BizTalk 2004 got it right: It needs to be shown visually. Nested scopes are a tree, don&rsquo;t try to represent it with a list; it doesn&rsquo;t work. </li>
<li>The variable window will show &#47; hide variables based on the scope. If you select a composite activity, it will only show variables declared at its scope and that of its ancestors. Variables defined in children of the activity are not included.      <br &#47;>I understand it&rsquo;s trying to be useful, but this just gets in the way. If you want to define or look at a variable defined 3 levels deep, then you get to first navigate all the workflow to get there just to be able to get the Variables window to show you the definition. Gah! </li>
<li>When adding a new variable, scope defaults to the activity currently selected in the designer. This almost makes sense, but if you decide that&rsquo;s not right, well, surprise! Scopes shown in the drop down list for the Scope column follow the same rules as above. That means you can&rsquo;t add a new variable in a scope without being physically nested within it (i.e. can&rsquo;t add to a sibling activity). Annoying. </li> </ul><br />
<h2>Conclusion</h2>
<p>Many of the issues I&rsquo;ve brought up here are basic usability problems, but many correctable. One can hope there&rsquo;s still time in the Visual Studio 2010 timeframe to see some of those UX issues addressed.</p>
<p>I&rsquo;m not very hopeful, though, about having a designer that&rsquo;s really more pleasurable to use and that addresses the bigger issues related to the experience of creating and editing a workflow more conveniently and with less clicking, as those might very well require rethinking the entire process over. It&rsquo;s really more of a conceptual issue than a technical issue, in a way.</p>
<p>Don&rsquo;t get me wrong, the new designer is an improvement over the old one. Unfortunately, that&rsquo;s all it is: An improvement. It provides an interesting foundation to address some of the technical shortcomings that the original Workflow Designer has, but it doesn&rsquo;t really provide a more meaningful&#47;powerfull way of designing workflows. In that sense, I do think it&rsquo;s a bit of a missed opportunity. </p></p>
