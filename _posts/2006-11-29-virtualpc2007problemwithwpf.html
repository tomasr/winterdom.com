---
layout: post
status: publish
published: true
title: Virtual PC 2007 Problem with WPF
author:
  display_name: Tomas Restrepo
  login: tomasr
  email: tomas@winterdom.com
  url: http://winterdom.com/
author_login: tomasr
author_email: tomas@winterdom.com
author_url: http://winterdom.com/
wordpress_id: 1016
wordpress_url: http://winterdom.com/2006/11/virtualpc2007problemwithwpf
date: '2006-11-29 06:21:44 +0000'
date_gmt: '2006-11-29 06:21:44 +0000'
categories:
- Development
- Vista
- WPF
tags: []
comments: []
---
<p><!--start_raw-->
<p>Like <a href="http:&#47;&#47;codebetter.com&#47;blogs&#47;jeff.lynch&#47;">Jeff Lynch</a>, I've been running the Virtual PC 2007 lately since my Vista RTM install. In general terms, it works just as well (or just as fair, more likely) as Virtual PC 2004. Like <a href="http:&#47;&#47;codebetter.com&#47;blogs&#47;jeff.lynch&#47;archive&#47;2006&#47;11&#47;28&#47;VPC-2007-Beta_3A00_-Centrino-915-Chipset-Issues.aspx">Jeff</a>, I've always had the <a href="&#47;weblog&#47;2006&#47;06&#47;15&#47;VPCPerformanceAndIntel950Chipset.aspx">problem</a> with the Centrino chipsets&nbsp;issues in Virtual PC (though in my case it's with the 950 set).</p>
<p>That said, I did try today adding the <enable_idle_threads> option to my virtual machine configuration file and it seems slightly better (at least it doesn't hog 100% of the CPU all the time). We'll see how it goes.</p>
<p>Meanwhile, I did ran yesterday into an ugly issue: Doing any WPF development on Virtual PC 2007, on my machine at least, is a big no-no. Sure, I knew from the start that WPF won't really perform well under a virtual machine, and that's fine; that's not the issue at all. </p>
<p>The problem I noticed was that running anything on the virtual machine that initializes WPF, even if it doesn't do any animation or 3D causes Virtual PC to take a long time to redraw the virtual machine screen. Seeing the response to, say, a click on a button, takes almost one second to render on screen. It's not that you can see the screen redrawing slowly either; the screen changes instantly, it just does so one second too late.</p>
<p>At first I thought something might be hogging my CPU, but I checked and both the host and guest CPUs are almost idled when this happens. In fact, I went so far as to connect through RDP to the guest OS and it is very responsive through remote desktop (well, as responsive as can be expected through RDP), so it's not like the whole machine is getting slowed down; it's just the VPC&nbsp;display rendering.</p>
<p>What's so bad about this? Is not that you can't run a full fleged WPF application; it's that you can't even develop one. Opening up a XAML file in Visual Studio with the .NET FX 3.0 Orcas&nbsp;extensions causes the issue as well, since the XAML editor initializes WPF for rendering. So, it's editing in Notepad2 for me, I guess. I bugged this, but somehow, I'm not expecting it to make much of a difference...</p>
<div class="wlWriterSmartContent" id="0767317B-992E-4b12-91E0-4F059A8CECA8:037488fd-58c8-4396-b3ba-a54cc705052f" contenteditable="false" style="padding-right: 0px; display: inline; padding-left: 0px; padding-bottom: 0px; margin: 0px; padding-top: 0px">Technorati tags: <a href="http:&#47;&#47;technorati.com&#47;tags&#47;Vista" rel="tag">Vista</a>, <a href="http:&#47;&#47;technorati.com&#47;tags&#47;WPF" rel="tag">WPF</a>, <a href="http:&#47;&#47;technorati.com&#47;tags&#47;Performance" rel="tag">Performance</a>, <a href="http:&#47;&#47;technorati.com&#47;tags&#47;Virtual%20PC" rel="tag">Virtual PC</a></div><!--end_raw--></p>
