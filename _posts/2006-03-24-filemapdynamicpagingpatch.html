---
layout: post
status: publish
published: true
title: FileMap dynamic paging patch
author:
  display_name: Tomas Restrepo
  login: tomasr
  email: tomas@winterdom.com
  url: http://winterdom.com/
author_login: tomasr
author_email: tomas@winterdom.com
author_url: http://winterdom.com/
wordpress_id: 246
wordpress_url: http://winterdom.com/2006/03/filemapdynamicpagingpatch
date: '2006-03-24 13:49:38 +0000'
date_gmt: '2006-03-24 13:49:38 +0000'
categories:
- ".NET"
tags: []
comments:
- id: 183
  author: Mark Petersen
  author_email: markppetersen@hotmail.com
  author_url: ''
  date: '2007-02-01 08:37:55 +0000'
  date_gmt: '2007-02-01 08:37:55 +0000'
  content: |
    Any chance this library would place nice with ASP.NET?
    I've been looking at an article on code project: http:&#47;&#47;www.codeproject.com&#47;aspnet&#47;VbNetMemoryMappedCache.asp
    But the author pointed out security issues I don't know how to solve.
    "All mutexes and Memory Mapped Files are created using a NULL DACL."
    Anyway, thanks for sharing your library!
- id: 184
  author: Tomas Restrepo
  author_email: tomas@winterdom.com
  author_url: http://www.winterdom.com/weblog/
  date: '2007-02-01 11:30:06 +0000'
  date_gmt: '2007-02-01 11:30:06 +0000'
  content: |
    Mark,
    I haven't tried it, but from what I remember no, I wasn't explicitly creating the mapped files with a null DACL and instead let Windows give them a default DACL (which in most cases is actually a good enough choice). The reason for this was that I wrote the original code back in .NET v1.0 days, and there was no native security manipulation routines (until v2.0 no DACL manipulation was added to the framework), and I really didn't want to have to do a whole bunch of extra interop and it simply was not a priority.
    That said, I provided full source code to the library, and if you cared about that functionality, nothing would prevent you from doing so far easier now (It's mostly just modifying a single CreateFile() code in MemoryMappedFile.cs).
---
<p><!--start_raw-->Steve Simpson has graciously provided a patch for my <a href="&#47;dev&#47;dotnet&#47;FileMap-2.0.2.zip">FileMap</a> library that supports one possible implementation of dynamic paging. That is, it supports automatic mapping&#47;unmapping of views of the memory mapped file as you seek&#47;read&#47;write through a virtual stream that covers the entire size of the memory mapped file. Steve let me know that he has been using it successfully with files > 800MB in size!<br><br>Steve let me repost his files here on my site, for which I'm very greatful; I'm sure others will find his work just as useful! You can download the patched files <a href="&#47;dev&#47;dotnet&#47;Winterdom.IO.FileMap_Dynamic_Paging_Mods_2006_03_10.zip">here</a>. I'd like to publicly thank Steve again for this valuable contribution!<br>
<p></p><!--end_raw--></p>
