---
layout: post
status: publish
published: true
title: ETW Logging in IIS 8.5 (2)
author:
  display_name: Tomas Restrepo
  login: tomasr
  email: tomas@winterdom.com
  url: http://winterdom.com/
author_login: tomasr
author_email: tomas@winterdom.com
author_url: http://winterdom.com/
wordpress_id: 1491
wordpress_url: http://winterdom.com/?p=1491
date: '2014-11-09 02:41:27 +0000'
date_gmt: '2014-11-09 02:41:27 +0000'
categories:
- IIS
tags: []
comments: []
---
<p>A few days ago <a href="http:&#47;&#47;winterdom.com&#47;2014&#47;11&#47;etw-logging-in-iis-8-5" title="ETW Logging in IIS 8.5">I posted a sample</a> on capturing ETW log events generated by IIS 8.5. </p>
<p>This turned out to be a good excuse to play around with the new <a href="http:&#47;&#47;azure.microsoft.com&#47;en-us&#47;services&#47;event-hubs&#47;" title="Azure Event Hubs">Event Hubs</a> service in Microsoft Azure, so I've now extended the sample with a collector application that can capture the ETW log events generated by IIS and push them in JSON format to an Azure Event Hub.</p>
<p><a href="http:&#47;&#47;winterdom.com&#47;wp-content&#47;uploads&#47;2014&#47;11&#47;IISEventHub.png"><img src="http:&#47;&#47;winterdom.com&#47;wp-content&#47;uploads&#47;2014&#47;11&#47;IISEventHub.png" alt="IIS - Event Hub" width="291" height="247" class="alignnone size-full wp-image-1493" &#47;></a></p>
<p>From here, I could process events in a number of ways, and it will be interesting to play with other Azure services to do just that later on. The sample code is updated on the <a href="https:&#47;&#47;github.com&#47;tomasr&#47;iis-etw-tracing" title="iis-etw-tracing">github repository</a>, but be aware it is very rough, but I'll keep improving it.</p>
