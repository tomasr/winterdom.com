---
layout: post
status: publish
published: true
title: WCF, WS-RM and Partial Trust
author:
  display_name: Tomas Restrepo
  login: tomasr
  email: tomas@winterdom.com
  url: http://winterdom.com/
author_login: tomasr
author_email: tomas@winterdom.com
author_url: http://winterdom.com/
wordpress_id: 160
wordpress_url: http://winterdom.com/2006/02/wcfwsrmandpartialtrust
date: '2006-02-20 17:33:46 +0000'
date_gmt: '2006-02-20 17:33:46 +0000'
categories:
- WCF
- WinFX
tags: []
comments: []
---
<p><!--start_raw-->The discussion about Reliable Messaging and <a href="http:&#47;&#47;windowscommunication.net&#47;">WCF</a> is widening today with comments from <a href="http:&#47;&#47;friends.newtelligence.net&#47;clemensv&#47;PermaLink,guid,e75402c6-bdd6-438c-9bf2-31f64b8e0557.aspx">Clemens</a>, <a href="http:&#47;&#47;blogs.msdn.com&#47;shycohen&#47;archive&#47;2006&#47;02&#47;20&#47;535717.aspx">Shy Cohen</a> and even <a href="http:&#47;&#47;www.25hoursaday.com&#47;weblog&#47;PermaLink.aspx?guid=ca19f6b9-8afd-4e93-b4f6-8c3beee8d088">Dare Obasanjo</a>. This is quite an interesting discussion which offers those of us that haven't followed the specs recently a glimpse about the kind of services offered by WS-ReliableMessaging and how <a href="http:&#47;&#47;windowscommunication.net&#47;">WCF</a> implements it. I for one certainly appreciate Shy and Clemens speaking more clearly and openly about the issues involved.</p>
<p>That said, one has to wonder just how useful WS-RM is in the real world if, as Clemens says, it doesn't necessarily force implementors (and more importantly, endpoints claiming to support it) to actually be reliable. As Dare quite correctly (imho) points out, it's application and server crashes that usually cause the problems in the first place. Quite honestly, I personally haven't had&#47;seen a need for services with In-Order-Delivery and At-Most-Once-Delivery semantics were those precise semantics didn't imply the need for a Real Reliable messaging (i.e. the kind that MSMQ or MQSeries and such can offer, or webservices with a lot of built in persistence and hand built support), and not just the <em><font color="#ffa500">illusion-of-reliability</font></em> (if I may be so bold as to call it that) offered by WS-RM.</p></p>
<p>Do notice, however, that I clearly use an AND on the previous paragraph. There are a few scenarios where you might need, for example, AtMostOnce semantics which can be easily guaranteed by the receiving application even without a reliable queued-based transport. The real question would be: Would you be satisfied in that scenario with what WS-RM (and thus <a href="http:&#47;&#47;windowscommunication.net&#47;">WCF</a>'s implementation)? Probably not, since if that is your requirement, then surviving restarts is probably something you require, period, and that implies persistence you'd need to bake into your solution yourself.</p></p>
<p>The whole <i>Reliable</i>-debacle as well as the recent thread on <a href="http:&#47;&#47;windowscommunication.net&#47;">WCF</a>'s lack of support for Partial Trust scenarios, do bring some interesting questions to the table as to whether moving to <a href="http:&#47;&#47;windowscommunication.net&#47;">WCF</a> is a good thing for some teams. Now, don't get me wrong, I'm quite excited about <a href="http:&#47;&#47;windowscommunication.net&#47;">WCF</a> itself, but, as luck happens, those of us in the trenches sometimes have to make hard decisions about whether to go with a technology or not, weighting not only the coolness factor but also other things like training, support, prerequisits, complexity and so on.</p><strong><font color="#006400">On using WCF</font></strong></p>
<p>So these two topics have caused me to think what I would do if I were in the situation of requiring one of the two things above, and whether I'd go with the recommendations provided so far to "work around" those limitations in the product. Quite a few times I've been asked to help a team decide which technology to use to develop a solution, and, quite frankly, one of the things I personally worry more about in those scenarios is complexity: Will using X technology make it harder to deploy? Are team members familiar with the intrincasies in Y product? Does at least someone in the team know technology Z good enough to help out her team mates if shit happens? Will using technology W make it easier to diagnose problems?</p></p>
<p>These topics worry me a little with <a href="http:&#47;&#47;windowscommunication.net&#47;">WCF</a> (yes, not a whole lot as I'm not in that position right now :)), after the answers given. Consider my considerations (how redundant!) for them, if you please:</p></p>
<ol>
<li><em><a href="http:&#47;&#47;windowscommunication.net&#47;">WCF</a> and Partial Trust:</em> Someone suggested that to work around this you created a regular .NET service proxy to the <a href="http:&#47;&#47;windowscommunication.net&#47;">WCF</a> service using wsdl.exe (or VS' Add Web Reference), and configured <a href="http:&#47;&#47;windowscommunication.net&#47;">WCF</a> with a regular HTTP protocol binding. That's cool. Or is it? Let's consider: If the team develops both service and consumer, will having to deal with the two technologies cause any pain? Will it make it harder to diagnose problems? So, one does have to wonder, if you find yourself in this position, why use WCF to create the server side instead of using good old, well understood, ASMX WebServices? After all, you obviously don't need any of <a href="http:&#47;&#47;windowscommunication.net&#47;">WCF</a>'s advanced features (like security).
<p>Some of you might scream out of the top of your lungs right now: <em>"But creating </em><a href="http:&#47;&#47;windowscommunication.net&#47;"><em>WCF</em></a><em> Services is just as easy as creating ASMX Services, you just have to change the attributes used!"</em>. True, but only up to a point. Sure, writing trivial&#47;initial services in both technologies is just as easy on both. But, that's only part of the equation, and unless you can address the other considerations (i.e. you or someone in your team is already quite familiar with <a href="http:&#47;&#47;windowscommunication.net&#47;">WCF</a> to start with), I'd say go with what's best known, simpler, and less likely to break. But hey, that's just my opinion :)</p><br />
</li>
<li><em>Reliability:</em> So how about reliable messaging? <a href="http:&#47;&#47;blogs.msdn.com&#47;shycohen&#47;">Shy Cohen</a> quite correctly points out that if you need real reliable messaging with Indigo you should use <a href="http:&#47;&#47;windowscommunication.net&#47;">WCF</a> over MSMQ, whose transactional queues already provide this kind of support. This one does have one clear answer, thankfully, I think. If you need advanced security, then by all means add <a href="http:&#47;&#47;windowscommunication.net&#47;">WCF</a> to the mix, and again, find someone who knows what he's doing. If you don't, hey, System.Messaging has a very nice, intuitive and simple API that works, is widely documented, and easy to find information and samples about. </li></ol></p>
<p>Let me stress that this post is not about finding reasons to avoid <a href="http:&#47;&#47;windowscommunication.net&#47;">WCF</a>. Quite the contrary, I believe most people should start seriously considering WCF, or at least start building services that are easier to migrate to <a href="http:&#47;&#47;windowscommunication.net&#47;">WCF</a> in the future. It's just that sometimes going with <em>what is there and works</em> is just a better solution, and helps you avoid unneeded complexity. There's something attractive about not making trouble for yourself, sometimes.</p><!--end_raw--></p>
